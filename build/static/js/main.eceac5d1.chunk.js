(this["webpackJsonpnorthcoders-news"]=this["webpackJsonpnorthcoders-news"]||[]).push([[0],{25:function(e,t,a){e.exports=a(55)},30:function(e,t,a){},31:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),l=a.n(r),s=(a(30),a(1)),o=a(2),i=a(4),u=a(3),m=(a(31),a(5)),p=function(e){var t=e.status,a=e.msg;return c.a.createElement("div",{className:"content__container"},c.a.createElement("h2",{className:"content__message__text"},"< oh no />"),c.a.createElement("h4",{className:"content__message__text"},"status: ",t),c.a.createElement("h4",{className:"content__message__text"},a.toLowerCase()))},h=a(22),_=a.n(h),d=function(e){var t=e.topics;return c.a.createElement("div",{className:"navbar"},c.a.createElement("nav",null,c.a.createElement("div",{className:"navbar__container"},c.a.createElement(_.a,{trigger:"< topics />",className:"navbar__title"},c.a.createElement("ul",{className:"navbar__list"},t.map((function(e){return c.a.createElement(m.a,{to:"/topics/".concat(e.slug),key:e.slug,className:"link__black"},c.a.createElement("li",{className:"navbar__topic"},"< ",e.slug," />"))})))),c.a.createElement(m.a,{to:"/user/createarticle",className:"link__red"},c.a.createElement("p",null,"create an article =>")))))},f=a(7),E=a(23),v=a.n(E).a.create({baseURL:"https://hm-nc-news-app.herokuapp.com/api/"}),b=function(){return v.get("/topics").then((function(e){return e.data.topics}))},g=function(e,t,a,n,c){return v.get("/articles",{params:{topic:e,sort_by:t,order:a,limit:n,p:c}}).then((function(e){var t=e.data;return{articles:t.articles,total_count:t.total_count}}))},N=function(e){return v.get("/articles/".concat(e)).then((function(e){return e.data.article}))},C=function(e){return v.post("articles",e).then((function(e){return e.data.article}))},y=function(e,t,a){return v.patch("/".concat(e,"s/").concat(t),a).then((function(t){return t.data[e]}))},k=function(e,t){return v.post("/articles/".concat(e,"/comments"),t).then((function(e){return e.data.comment}))},j=function(e,t,a){return v.get("/articles/".concat(e,"/comments"),{params:{limit:t,p:a}}).then((function(e){return e.data.comments}))},O=function(e){return v.delete("/comments/".concat(e))},S=function(e){return v.delete("/articles/".concat(e))},w=function(){return v.get("/users").then((function(e){return e.data.users}))},A=function(e){return v.get("/users/".concat(e)).then((function(e){return e.data.user}))},D=function(){return c.a.createElement("div",null,c.a.createElement("h2",{className:"content__articlelist__title"},"< loading... />"))},I=function(e){var t=e.handleInputChange,a=e.handleInputSubmit;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:a},c.a.createElement("label",null,"sort by: "),c.a.createElement("select",{className:"content__select",name:"sort_by",onChange:t},c.a.createElement("option",{value:"created_at"},"date posted"),c.a.createElement("option",{value:"comment_count"},"article comments"),c.a.createElement("option",{value:"votes"},"article votes")),c.a.createElement("label",null," order: "),c.a.createElement("select",{className:"content__select",name:"order",onChange:t},c.a.createElement("option",{value:"desc"},"descending"),c.a.createElement("option",{value:"asc"},"ascending")),c.a.createElement("button",null," => click to display articles")))},L=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={articles:[],totalArticles:0,isLoading:!0,sort_by:"created_at",order:"desc",p:1,limit:10,error:null},e.componentDidMount=function(){var t=e.props.topic,a=e.state,n=a.sort_by,c=a.order,r=a.limit,l=a.p;e.fetchArticles(t,n,c,r,l)},e.componentDidUpdate=function(t,a){if(e.props.topic!==t.topic||e.state.p!==a.p){var n=e.props.topic,c=e.state,r=c.sort_by,l=c.order,s=c.limit,o=c.p;e.fetchArticles(n,r,l,s,o)}},e.fetchArticles=function(t,a,n,c,r){g(t,a,n,c,r).then((function(t){var a=t.articles,n=t.total_count;e.setState({articles:a,isLoading:!1,total_count:n})})).catch((function(t){var a=t.response,n=a.status,c=a.data;e.setState({error:{status:n,msg:c.message},isLoading:!1})}))},e.handleInputChange=function(t){var a=t.target,n=a.value,c=a.name;e.setState(Object(f.a)({},c,n))},e.handleInputSubmit=function(t){t.preventDefault();var a=e.props.topic,n=e.state,c=n.sort_by,r=n.order,l=n.limit,s=n.p;e.fetchArticles(a,c,r,l,s),e.setState({p:1})},e.handleButtonClick=function(t){e.setState((function(e){return{p:e.p+t}}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.articles,n=t.total_count,r=t.isLoading,l=t.sort_by,s=t.order,o=t.limit,i=t.p,u=t.error;if(r)return c.a.createElement(D,null);if(u){var h=this.state.error,_=h.status,d=h.msg;return c.a.createElement(p,{status:_,msg:d})}return c.a.createElement("div",{className:"content__container"},c.a.createElement(I,{sort_by:l,order:s,handleInputChange:this.handleInputChange,handleInputSubmit:this.handleInputSubmit}),c.a.createElement("ul",{className:"content__articlelist"},a.map((function(e){var t=e.title,a=e.votes,n=e.comment_count,r=e.article_id;return c.a.createElement(m.a,{to:"/articles/".concat(r),key:r,className:"link__white"},c.a.createElement("li",{className:"content__article__title"},c.a.createElement("h4",{className:"content__article__title__name"},t),c.a.createElement("p",{className:"content__article__title__stats"},"{ votes: ",a,", comments: ",n," }")))}))),c.a.createElement("section",{className:"content__pages"},c.a.createElement("h4",null,"page ",i),c.a.createElement("button",{onClick:function(){e.handleButtonClick(-1)},disabled:i<2},"\u2190"),c.a.createElement("button",{onClick:function(){e.handleButtonClick(1)},disabled:i*o>n},"\u2192")))}}]),a}(n.Component),U=function(){return c.a.createElement("div",null,c.a.createElement("h2",{className:"content__articlelist__title"},"< all articles />"),c.a.createElement(L,null))},x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={users:[]},e.componentDidMount=function(){e.fetchUsers()},e.fetchUsers=function(){w().then((function(t){e.setState({users:t})}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.handleUserChange,n=this.state.users,r=t.username;return c.a.createElement("div",{className:"loggedin"},c.a.createElement("p",null,"{ logged in as: '",r,"' }"),c.a.createElement("label",null,"change user: "),c.a.createElement("select",{className:"content__select",name:"username",onChange:a},c.a.createElement("option",{value:r},r),n.map((function(e){return e.username!==r?c.a.createElement("option",{value:e.username,key:e.username},e.username):null}))))}}]),a}(n.Component),M=function(){return c.a.createElement("div",{className:"header__text"},c.a.createElement(m.a,{className:"link__black",to:"/"},c.a.createElement("h1",null,"< northcoders news />")))},B=function(e){var t=e.topic;return c.a.createElement("div",null,c.a.createElement("h2",{className:"content__articlelist__title"},"< ",t," />"),c.a.createElement(L,{topic:t}))},V=a(24),J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={comment:{username:"",body:""}},e.handleSubmit=function(t){t.preventDefault();var a=e.state.comment;(0,e.props.addNewComment)(a),e.setState({comment:{username:"",body:""}})},e.handleInputChange=function(t){var a=e.props.user.username,n=t.target.value;e.setState({comment:{username:a,body:n}})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.user.username,t=this.state.comment.body;return c.a.createElement("div",null,c.a.createElement("h3",null,"< add a comment />"),c.a.createElement("h4",null,"comment = {"),c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("label",{className:"content__comments__commentlabel"},c.a.createElement("p",null,"username: "),c.a.createElement("p",{className:"content__comments__commentinput"},e)),c.a.createElement("label",{className:"content__comments__commentlabel"},c.a.createElement("p",null,"comment: "),c.a.createElement("input",{onChange:this.handleInputChange,className:"content__comments__commentinput",value:t})),c.a.createElement("h4",null,"}"),c.a.createElement("button",null,"submit comment")))}}]),a}(n.Component),q=function(e){return new Date(e).toUTCString()},T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={optimisticVotes:0},e.handleClick=function(t){var a=e.props.id;y("article",a,{inc_votes:t}),e.setState((function(e){return{optimisticVotes:e.optimisticVotes+t}}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.votes,n=t.username,r=t.author,l=this.state.optimisticVotes;return c.a.createElement("div",{className:"content__vote"},c.a.createElement("div",{className:"content__vote__buttons"},c.a.createElement("button",{onClick:function(){e.handleClick(1)},disabled:l>0||n===r},"\u2191"),c.a.createElement("button",{onClick:function(){e.handleClick(-1)},disabled:l<0||n===r},"\u2193")),c.a.createElement("h4",{className:"content__vote__text"},"{ votes: ",a+l," }"))}}]),a}(n.Component),F=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={comments:[],isLoading:!0,optimisticComments:0,limit:10,p:1,error:null},e.componentDidMount=function(){e.fetchComments()},e.componentDidUpdate=function(t,a){e.state.p!==a.p&&e.fetchComments()},e.fetchComments=function(){var t=e.props.article_id,a=e.state,n=a.limit,c=a.p;j(t,n,c).then((function(t){e.setState({comments:t,isLoading:!1})})).catch((function(t){var a=t.response,n=a.status,c=a.data;e.setState({error:{status:n,msg:c.message},isLoading:!1})}))},e.addNewComment=function(t){var a=e.props.article_id;k(a,t).then((function(t){e.setState((function(e){var a=e.comments,n=e.optimisticComments;return{comments:[t].concat(Object(V.a)(a)),optimisticComments:n+1}}))}))},e.handleDeleteClick=function(t){t.preventDefault();var a=t.target.value;O(a).then((function(){e.setState((function(e){var t=e.comments,n=e.optimisticComments,c=Number.parseInt(a);return{comments:t.filter((function(e){return e.comment_id!==c})),optimisticComments:n-1}}))}))},e.handleButtonClick=function(t){e.setState((function(e){return{p:e.p+t}}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.comments,n=t.isLoading,r=t.optimisticComments,l=t.p,s=t.error,o=t.limit,i=this.props.comment_count,u=this.props.user.username;if(n)return c.a.createElement(D,null);if(s){var m=this.state.error,h=m.status,_=m.msg;return c.a.createElement(p,{status:h,msg:_})}return c.a.createElement("div",{className:"content__comments"},c.a.createElement("p",{className:"content__comments__title"},"{ comments: ",+i+r," }"),c.a.createElement("ul",{className:"content__comments__list"},a.map((function(t){var a=t.author,n=t.votes,r=t.created_at,l=t.body,s=t.comment_id;return c.a.createElement("li",{className:"content__comments__list__comment",key:s},c.a.createElement("h3",null,"< ",a," />"),c.a.createElement("h4",null,q(r)),u===a?c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:e.handleDeleteClick,value:s},"delete comment")):null,c.a.createElement(T,{votes:n,id:s,username:u,author:a}),c.a.createElement("p",null,l))}))),c.a.createElement("section",{className:"content__pages"},c.a.createElement("h4",null,"page ",l),c.a.createElement("button",{onClick:function(){e.handleButtonClick(-1)},disabled:l<2},"\u2190"),c.a.createElement("button",{onClick:function(){e.handleButtonClick(1)},disabled:l*o>i},"\u2192")),c.a.createElement(J,{user:this.props.user,addNewComment:this.addNewComment}))}}]),a}(n.Component),H=function(e){var t=e.title,a=e.topic;return c.a.createElement("div",{className:"content__container"},c.a.createElement("h2",{className:"content__message__text"},"< your article '",t,"' has been deleted />"),c.a.createElement(m.a,{to:"/topics/".concat(a),className:"link__red"},c.a.createElement("h4",null,"{ return to ",a," articles }")))},G=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={article:{},isLoading:!0,deleted:!1,error:null},e.componentDidMount=function(){var t=e.props.article_id;e.fetchArticle(t)},e.fetchArticle=function(t){N(t).then((function(t){e.setState({article:t,isLoading:!1})})).catch((function(t){var a=t.response,n=a.status,c=a.data;e.setState({error:{status:n,msg:c.message},isLoading:!1})}))},e.handleDeleteClick=function(t){t.preventDefault();var a=t.target.value;S(a),e.setState({deleted:!0})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.user.username,t=this.state,a=t.article,n=t.isLoading,r=t.deleted,l=t.error,s=a.title,o=a.body,i=a.topic,u=a.author,h=a.votes,_=a.comment_count,d=a.article_id,f=a.created_at;if(r)return c.a.createElement(H,{title:s,topic:i});if(l){var E=this.state.error,v=E.status,b=E.msg;return c.a.createElement(p,{status:v,msg:b})}return n?c.a.createElement(D,null):c.a.createElement("div",{className:"content__container"},c.a.createElement(m.a,{to:"/topics/".concat(i),className:"link__black"},c.a.createElement("h3",null,"< ",i," />")),c.a.createElement("h2",{className:"content__title"},"< ",s," />"),c.a.createElement("h3",{className:"content__title"},"< ",u," />"),c.a.createElement("h4",null,q(f)),e===u?c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:this.handleDeleteClick,value:d},"delete article")):null,c.a.createElement(T,{votes:h,id:d,username:e,author:u}),c.a.createElement("p",{className:"content__article__body"},o),c.a.createElement(F,{article_id:d,comment_count:_,user:this.props.user}))}}]),a}(n.Component),R=function(){return c.a.createElement("div",{className:"footer"},c.a.createElement("h4",null,"Created by Harriet Melesi"),c.a.createElement("a",{href:"https://github.com/HMelesi/fe-northcoders-news",target:"_blank",rel:"noopener noreferrer",className:"link__black"},c.a.createElement("h4",null,"See Github project here >")))},z=a(9),K=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={article:{title:"",body:"",topic:"",author:""},postedArticle:{}},e.componentDidMount=function(){var t=e.props.user.username;e.setState((function(e){return{article:Object(z.a)({},e.article,{author:t})}}))},e.handleInputChange=function(t){var a=t.target,n=a.value,c=a.name;e.setState((function(e){return{article:Object(z.a)({},e.article,Object(f.a)({},c,n))}}))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.article;C(a).then((function(t){e.setState((function(e){return{postedArticle:t,article:Object(z.a)({},e.article,{title:"",body:"",topic:""})}}))}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.article,t=e.author,a=e.title,n=e.body,r=this.props.topics;return c.a.createElement("div",{className:"content__container"},c.a.createElement("h3",null,"< submit an article />"),c.a.createElement("form",{onSubmit:this.handleSubmit,className:"content__createarticle__form"},c.a.createElement("label",{className:"content__createarticle__label"},c.a.createElement("p",null,"username = "),c.a.createElement("p",{className:"content__createarticle__input"},t)),c.a.createElement("label",{className:"content__createarticle__label"},c.a.createElement("p",null,"title = "),c.a.createElement("input",{onChange:this.handleInputChange,className:"content__createarticle__input",name:"title",value:a,required:!0})),c.a.createElement("label",{className:"content__createarticle__label"},c.a.createElement("p",null,"topic = "),c.a.createElement("select",{className:"content__select",name:"topic",onChange:this.handleInputChange,required:!0,defaultValue:""},c.a.createElement("option",{value:"",disabled:!0},"choose a topic"),r.map((function(e){return c.a.createElement("option",{value:e.slug,key:e.slug},e.slug)})))),c.a.createElement("label",{className:"ccontent__createarticle__label"},c.a.createElement("p",null,"content = "),c.a.createElement("input",{onChange:this.handleInputChange,className:"content__createarticle__input",name:"body",value:n,required:!0})),c.a.createElement("button",null,"post article =>")),this.state.postedArticle.article_id?c.a.createElement(m.a,{to:"/articles/".concat(this.state.postedArticle.article_id),className:"link__red"},c.a.createElement("h4",null,"view your article '",this.state.postedArticle.title,"' here")):null)}}]),a}(n.Component),P=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={user:{username:"jessjelly",avatar_url:"https://s-media-cache-ak0.pinimg.com/564x/39/62/ec/3962eca164e60cf46f979c1f57d4078b.jpg",name:"Jess Jelly"},topics:[]},e.componentDidMount=function(){e.fetchTopics()},e.handleUserChange=function(t){var a=t.target.value;A(a).then((function(t){e.setState({user:t})}))},e.fetchTopics=function(){b().then((function(t){e.setState({topics:t})}))},e}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"header"},c.a.createElement(M,null),c.a.createElement(x,{user:this.state.user,handleUserChange:this.handleUserChange,handleUserSubmit:this.handleUserSubmit})),c.a.createElement(d,{topics:this.state.topics}),c.a.createElement(m.b,{className:"content"},c.a.createElement(U,{path:"/",user:this.state.user}),c.a.createElement(B,{path:"/topics/:topic"}),c.a.createElement(G,{path:"/articles/:article_id",user:this.state.user}),c.a.createElement(K,{path:"/user/createarticle",user:this.state.user,topics:this.state.topics}),c.a.createElement(p,{default:!0,status:404,msg:"the page you are looking for does not seem to exist"})),c.a.createElement("footer",null,c.a.createElement(R,null)))}}]),a}(n.Component);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(P,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.eceac5d1.chunk.js.map